{"map":{"version":3,"sources":["static/js/main.854d8e71.chunk.js"],"names":["this","push","19","module","exports","__webpack_require__","27","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","regenerator","regenerator_default","toConsumableArray","asyncToGenerator","classCallCheck","createClass","inherits","createSuper","dist","StreamlitAudioRecorder_StreamlitAudioRecorder","_StreamlitComponentBa","Object","StreamlitAudioRecorder","_super","props","_this","call","canvasRef","sessionId","recordingId","generateRecordingId","Date","now","Math","random","toString","substr","drawWaveform","state","analyser","current","canvas","canvasCtx","getContext","bufferLength","frequencyBinCount","dataArray","Uint8Array","draw","isRecording","animationId","requestAnimationFrame","setState","getByteTimeDomainData","fillStyle","fillRect","width","height","gradient","createLinearGradient","addColorStop","lineWidth","strokeStyle","beginPath","sliceWidth","x","lastY","i","y","moveTo","xc","quadraticCurveTo","lineTo","stroke","cancelAnimationFrame","startRecording","a","mark","_callee3","stream","audioContext","source","mediaRecorder","currentChunks","chunkCounter","sendChunksInterval","wrap","_context3","prev","next","navigator","mediaDevices","getUserMedia","audio","channelCount","sampleRate","echoCancellation","noiseSuppression","autoGainControl","sent","AudioContext","createMediaStreamSource","createAnalyser","connect","MediaRecorder","mimeType","audioBitsPerSecond","ondataavailable","e","data","size","previewChunks","concat","setInterval","_callee","blob","buffer","uint8Array","_context","length","Blob","type","arrayBuffer","setComponentValue","arr","fromEntries","entries","chunkId","isFinal","stop","onstop","_callee2","previewBlob","_context2","clearInterval","chunks","audioBlob","audioUrl","URL","createObjectURL","start","t0","console","error","stopRecording","getTracks","forEach","track","resetRecording","revokeObjectURL","audioData","downloadRecording","datetime","toLocaleString","replace","filename","document","createElement","style","display","href","download","body","appendChild","click","removeChild","render","theme","borderStyling","border","outline","padding","background","borderRadius","boxShadow","ref","marginBottom","backgroundColor","gap","justifyContent","flexWrap","onClick","color","cursor","Fragment","src","controls","marginTop","createRef","key","value","src_StreamlitAudioRecorder","setComponentReady","setFrameHeight","StrictMode","getElementById"],"mappings":"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"},"code":"(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{19:function(e,t,n){e.exports=n(27)},27:function(e,t,n){\"use strict\";n.r(t);var a=n(8),r=n.n(a),o=n(17),i=n.n(o),s=n(4),c=n.n(s),d=n(5),l=n(6),u=n(0),p=n(1),f=n(2),m=n(3),g=n(9),b=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).canvasRef=void 0,a.sessionId=void 0,a.recordingId=void 0,a.generateRecordingId=function(){return\"rec_\"+Date.now()+\"_\"+Math.random().toString(36).substr(2,9)},a.drawWaveform=function(){if(a.state.analyser&&a.canvasRef.current){var e=a.canvasRef.current,t=e.getContext(\"2d\"),n=a.state.analyser.frequencyBinCount,r=new Uint8Array(n);!function o(){if(a.state.isRecording){var i=requestAnimationFrame(o);if(a.setState({animationId:i}),a.state.analyser.getByteTimeDomainData(r),t){t.fillStyle=\"#f0f0f0\",t.fillRect(0,0,e.width,e.height);var s=t.createLinearGradient(0,0,e.width,0);s.addColorStop(0,\"#ff4b4b\"),s.addColorStop(1,\"#ff8b8b\"),t.lineWidth=3,t.strokeStyle=s,t.beginPath();for(var c=1*e.width/n,d=0,l=e.height/2,u=0;u<n;u++){var p=r[u]/128*e.height/2;if(0===u)t.moveTo(d,p);else{var f=(d+(d-c))/2;t.quadraticCurveTo(d-c,l,f,p)}l=p,d+=c}t.lineTo(e.width,e.height/2),t.stroke()}}else a.state.animationId&&cancelAnimationFrame(a.state.animationId)}()}},a.startRecording=Object(l.a)(c.a.mark((function e(){var t,n,r,o,i,s,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.recordingId=a.generateRecordingId(),e.next=4,navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:44100,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});case 4:t=e.sent,n=new AudioContext,r=n.createMediaStreamSource(t),o=n.createAnalyser(),r.connect(o),i=new MediaRecorder(t,{mimeType:\"audio/webm;codecs=opus\",audioBitsPerSecond:128e3}),5e3,s=[],u=0,i.ondataavailable=function(e){e.data.size>0&&(s.push(e.data),a.setState((function(t){return{previewChunks:[].concat(Object(d.a)(t.previewChunks),[e.data])}})))},p=setInterval(Object(l.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.length>0&&a.state.isRecording)){e.next=8;break}return t=new Blob(s,{type:\"audio/webm;codecs=opus\"}),s=[],e.next=5,t.arrayBuffer();case 5:n=e.sent,r=new Uint8Array(n),g.a.setComponentValue({arr:Object.fromEntries(r.entries()),chunkId:u++,sessionId:a.sessionId,recordingId:a.recordingId,isFinal:!1});case 8:case\"end\":return e.stop()}}),e)}))),5e3),i.onstop=Object(l.a)(c.a.mark((function e(){var t,n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearInterval(p),!(s.length>0)){e.next=8;break}return t=new Blob(s,{type:\"audio/webm;codecs=opus\"}),e.next=5,t.arrayBuffer();case 5:n=e.sent,r=new Uint8Array(n),g.a.setComponentValue({arr:Object.fromEntries(r.entries()),chunkId:u,sessionId:a.sessionId,recordingId:a.recordingId,isFinal:!0});case 8:o=new Blob(a.state.previewChunks,{type:\"audio/webm;codecs=opus\"}),a.setState({chunks:[],previewChunks:[],isRecording:!1,mediaRecorder:null,audioBlob:o,audioUrl:URL.createObjectURL(o)});case 10:case\"end\":return e.stop()}}),e)}))),i.start(100),a.setState({mediaRecorder:i,isRecording:!0,analyser:o,previewChunks:[],audioUrl:null,audioBlob:null},a.drawWaveform),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(\"Error accessing microphone:\",e.t0);case 23:case\"end\":return e.stop()}}),e,null,[[0,20]])}))),a.stopRecording=function(){a.state.mediaRecorder&&a.state.isRecording&&(a.state.mediaRecorder.stop(),a.state.mediaRecorder.stream.getTracks().forEach((function(e){return e.stop()})),a.state.animationId&&cancelAnimationFrame(a.state.animationId))},a.resetRecording=function(){a.state.animationId&&cancelAnimationFrame(a.state.animationId),a.state.audioUrl&&URL.revokeObjectURL(a.state.audioUrl),a.recordingId=a.generateRecordingId(),a.setState({isRecording:!1,audioBlob:null,chunks:[],previewChunks:[],audioUrl:null,audioData:null,analyser:null,animationId:null}),g.a.setComponentValue({type:\"reset\",sessionId:a.sessionId,recordingId:a.recordingId})},a.downloadRecording=function(){if(a.state.audioBlob){var e=(new Date).toLocaleString().replace(/[\\s,]/g,\"\").replace(/_/g,\"\"),t=\"streamlit_audio_\".concat(e,\".webm\"),n=document.createElement(\"a\");n.style.display=\"none\",n.href=URL.createObjectURL(a.state.audioBlob),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},a.render=function(){var e={};if(a.props.theme){var t=\"1px solid \".concat(a.state.isRecording?\"#ff4b4b\":\"#e0e0e0\");e.border=t,e.outline=t}return r.a.createElement(\"div\",{style:{padding:\"20px\",background:\"white\",borderRadius:\"10px\",boxShadow:\"0 2px 10px rgba(0,0,0,0.1)\"}},r.a.createElement(\"canvas\",{ref:a.canvasRef,width:\"500\",height:\"100\",style:{width:\"100%\",marginBottom:\"20px\",borderRadius:\"5px\",backgroundColor:a.state.isRecording?\"#fff4f4\":\"#f0f0f0\"}}),r.a.createElement(\"div\",{style:{display:\"flex\",gap:\"10px\",justifyContent:\"center\",flexWrap:\"wrap\"}},a.state.isRecording?r.a.createElement(\"button\",{onClick:a.stopRecording,style:{padding:\"10px 20px\",borderRadius:\"5px\",border:\"none\",backgroundColor:\"#4b4bff\",color:\"white\",cursor:\"pointer\"}},\"Stop Recording\"):r.a.createElement(\"button\",{onClick:a.startRecording,style:{padding:\"10px 20px\",borderRadius:\"5px\",border:\"none\",backgroundColor:\"#ff4b4b\",color:\"white\",cursor:\"pointer\"}},\"Start Recording\"),a.state.audioUrl&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"button\",{onClick:a.resetRecording,style:{padding:\"10px 20px\",borderRadius:\"5px\",border:\"none\",backgroundColor:\"#ff8c4b\",color:\"white\",cursor:\"pointer\"}},\"Reset Recording\"),r.a.createElement(\"audio\",{src:a.state.audioUrl,controls:!0,style:{marginTop:\"10px\",width:\"100%\"}}))))},a.state={isRecording:!1,mediaRecorder:null,audioBlob:null,chunks:[],audioUrl:null,audioData:null,analyser:null,animationId:null,previewChunks:[]},a.canvasRef=r.a.createRef(),a.sessionId=\"session_\"+Date.now()+\"_\"+Math.random().toString(36).substr(2,9),a.recordingId=a.generateRecordingId(),a}return Object(p.a)(n,[{key:\"componentDidMount\",value:function(){if(this.canvasRef.current){var e=this.canvasRef.current,t=e.getContext(\"2d\");if(t){t.fillStyle=\"#f0f0f0\",t.fillRect(0,0,e.width,e.height);var n=t.createLinearGradient(0,0,e.width,0);n.addColorStop(0,\"#ff4b4b\"),n.addColorStop(1,\"#ff8b8b\"),t.strokeStyle=n,t.lineWidth=3,t.beginPath(),t.moveTo(0,e.height/2),t.lineTo(e.width,e.height/2),t.stroke()}}}},{key:\"componentWillUnmount\",value:function(){this.state.animationId&&cancelAnimationFrame(this.state.animationId)}}]),n}(g.b),h=Object(g.c)(b);g.a.setComponentReady(),g.a.setFrameHeight(),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null)),document.getElementById(\"root\"))}},[[19,1,2]]]);","extractedComments":[]}