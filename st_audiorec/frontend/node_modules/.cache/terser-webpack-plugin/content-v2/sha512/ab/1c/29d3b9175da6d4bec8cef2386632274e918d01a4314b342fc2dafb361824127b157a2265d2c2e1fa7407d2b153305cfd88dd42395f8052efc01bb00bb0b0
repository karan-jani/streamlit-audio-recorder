{"map":{"version":3,"sources":["static/js/main.1c6a7e0e.chunk.js"],"names":["this","push","21","module","exports","__webpack_require__","29","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","objectSpread2","regenerator","regenerator_default","toConsumableArray","asyncToGenerator","classCallCheck","createClass","inherits","createSuper","dist","StreamlitAudioRecorder_StreamlitAudioRecorder","_StreamlitComponentBa","Object","StreamlitAudioRecorder","_super","props","_this","call","canvasRef","drawWaveform","state","analyser","current","canvas","canvasCtx","getContext","bufferLength","frequencyBinCount","dataArray","Uint8Array","draw","isRecording","animationId","requestAnimationFrame","setState","getByteTimeDomainData","fillStyle","fillRect","width","height","gradient","createLinearGradient","addColorStop","lineWidth","strokeStyle","beginPath","sliceWidth","x","lastY","i","y","moveTo","xc","quadraticCurveTo","lineTo","stroke","cancelAnimationFrame","startRecording","a","mark","_callee","stream","audioContext","source","mediaRecorder","wrap","_context","prev","next","navigator","mediaDevices","getUserMedia","audio","channelCount","sampleRate","echoCancellation","noiseSuppression","autoGainControl","sent","AudioContext","createMediaStreamSource","createAnalyser","connect","MediaRecorder","mimeType","audioBitsPerSecond","ondataavailable","e","data","size","chunks","concat","onstop","blob","Blob","type","audioBlob","audioUrl","URL","createObjectURL","arrayBuffer","then","buffer","uint8Array","setComponentValue","arr","fromEntries","entries","start","t0","console","error","stop","stopRecording","getTracks","forEach","track","resetRecording","audioData","downloadRecording","datetime","Date","toLocaleString","replace","filename","document","createElement","style","display","href","download","body","appendChild","click","removeChild","render","theme","borderStyling","border","outline","padding","background","borderRadius","boxShadow","ref","marginBottom","gap","alignItems","id","onClick","color","cursor","transition","controls","src","marginLeft","createRef","key","value","src_StreamlitAudioRecorder","setComponentReady","setFrameHeight","StrictMode","getElementById"],"mappings":"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"},"code":"(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{21:function(e,t,a){e.exports=a(29)},29:function(e,t,a){\"use strict\";a.r(t);var n=a(9),o=a.n(n),i=a(19),r=a.n(i),c=a(8),d=a(4),s=a.n(d),l=a(5),u=a(6),m=a(0),p=a(1),f=a(2),b=a(3),h=a(13),g=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).canvasRef=void 0,n.drawWaveform=function(){if(n.state.analyser&&n.canvasRef.current){var e=n.canvasRef.current,t=e.getContext(\"2d\"),a=n.state.analyser.frequencyBinCount,o=new Uint8Array(a);!function i(){if(n.state.isRecording){var r=requestAnimationFrame(i);if(n.setState({animationId:r}),n.state.analyser.getByteTimeDomainData(o),t){t.fillStyle=\"#f0f0f0\",t.fillRect(0,0,e.width,e.height);var c=t.createLinearGradient(0,0,e.width,0);c.addColorStop(0,\"#ff4b4b\"),c.addColorStop(1,\"#ff8b8b\"),t.lineWidth=3,t.strokeStyle=c,t.beginPath();for(var d=1*e.width/a,s=0,l=e.height/2,u=0;u<a;u++){var m=o[u]/128*e.height/2;if(0===u)t.moveTo(s,m);else{var p=(s+(s-d))/2;t.quadraticCurveTo(s-d,l,p,m)}l=m,s+=d}t.lineTo(e.width,e.height/2),t.stroke()}}else n.state.animationId&&cancelAnimationFrame(n.state.animationId)}()}},n.startRecording=Object(u.a)(s.a.mark((function e(){var t,a,o,i,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:44100,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});case 3:t=e.sent,a=new AudioContext,o=a.createMediaStreamSource(t),i=a.createAnalyser(),o.connect(i),(r=new MediaRecorder(t,{mimeType:\"audio/webm;codecs=opus\",audioBitsPerSecond:128e3})).ondataavailable=function(e){e.data.size>0&&n.setState((function(t){return{chunks:[].concat(Object(l.a)(t.chunks),[e.data])}}))},r.onstop=function(){var e=new Blob(n.state.chunks,{type:\"audio/webm;codecs=opus\"});n.setState({chunks:[],audioBlob:e,isRecording:!1,mediaRecorder:null,audioUrl:URL.createObjectURL(e)}),e.arrayBuffer().then((function(e){var t=new Uint8Array(e);h.a.setComponentValue({arr:Object.fromEntries(t.entries())})}))},r.start(100),n.setState({mediaRecorder:r,isRecording:!0,analyser:i},n.drawWaveform),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(\"Error accessing microphone:\",e.t0);case 18:case\"end\":return e.stop()}}),e,null,[[0,15]])}))),n.stopRecording=function(){n.state.mediaRecorder&&n.state.isRecording&&(n.state.mediaRecorder.stop(),n.state.mediaRecorder.stream.getTracks().forEach((function(e){return e.stop()})),n.state.animationId&&cancelAnimationFrame(n.state.animationId))},n.resetRecording=function(){n.state.animationId&&cancelAnimationFrame(n.state.animationId),n.setState({isRecording:!1,audioBlob:null,chunks:[],audioUrl:null,audioData:null,analyser:null,animationId:null}),h.a.setComponentValue(null)},n.downloadRecording=function(){if(n.state.audioBlob){var e=(new Date).toLocaleString().replace(/[\\s,]/g,\"\").replace(/_/g,\"\"),t=\"streamlit_audio_\".concat(e,\".webm\"),a=document.createElement(\"a\");a.style.display=\"none\",a.href=URL.createObjectURL(n.state.audioBlob),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},n.render=function(){var e={};if(n.props.theme){var t=\"1px solid \".concat(n.state.isRecording?\"#ff4b4b\":\"#e0e0e0\");e.border=t,e.outline=t}return o.a.createElement(\"div\",{style:{padding:\"20px\",background:\"white\",borderRadius:\"10px\",boxShadow:\"0 2px 10px rgba(0,0,0,0.1)\"}},o.a.createElement(\"canvas\",{ref:n.canvasRef,width:\"500\",height:\"100\",style:{border:\"none\",borderRadius:\"8px\",background:\"#f0f0f0\",marginBottom:\"20px\"}}),o.a.createElement(\"div\",{style:{display:\"flex\",gap:\"10px\",alignItems:\"center\"}},o.a.createElement(\"button\",{id:\"record\",onClick:n.state.isRecording?n.stopRecording:n.startRecording,style:Object(c.a)(Object(c.a)({},e),{},{padding:\"8px 16px\",borderRadius:\"6px\",background:n.state.isRecording?\"#ff4b4b\":\"white\",color:n.state.isRecording?\"white\":\"#333\",cursor:\"pointer\",transition:\"all 0.2s ease\"})},n.state.isRecording?\"Stop Recording\":\"Start Recording\"),o.a.createElement(\"button\",{id:\"reset\",onClick:n.resetRecording,style:Object(c.a)(Object(c.a)({},e),{},{padding:\"8px 16px\",borderRadius:\"6px\",background:\"white\",cursor:\"pointer\",transition:\"all 0.2s ease\"})},\"Reset\"),o.a.createElement(\"button\",{id:\"download\",onClick:n.downloadRecording,style:Object(c.a)(Object(c.a)({},e),{},{padding:\"8px 16px\",borderRadius:\"6px\",background:\"white\",cursor:\"pointer\",transition:\"all 0.2s ease\"})},\"Download\"),n.state.audioUrl&&o.a.createElement(\"audio\",{id:\"audio\",controls:!0,src:n.state.audioUrl,style:{marginLeft:\"auto\",width:\"250px\",height:\"40px\",borderRadius:\"20px\"}})))},n.state={isRecording:!1,mediaRecorder:null,audioBlob:null,chunks:[],audioUrl:null,audioData:null,analyser:null,animationId:null},n.canvasRef=o.a.createRef(),n}return Object(p.a)(a,[{key:\"componentDidMount\",value:function(){if(this.canvasRef.current){var e=this.canvasRef.current,t=e.getContext(\"2d\");if(t){t.fillStyle=\"#f0f0f0\",t.fillRect(0,0,e.width,e.height);var a=t.createLinearGradient(0,0,e.width,0);a.addColorStop(0,\"#ff4b4b\"),a.addColorStop(1,\"#ff8b8b\"),t.strokeStyle=a,t.lineWidth=3,t.beginPath(),t.moveTo(0,e.height/2),t.lineTo(e.width,e.height/2),t.stroke()}}}},{key:\"componentWillUnmount\",value:function(){this.state.animationId&&cancelAnimationFrame(this.state.animationId)}}]),a}(h.b),R=Object(h.c)(g);h.a.setComponentReady(),h.a.setFrameHeight(),r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(R,null)),document.getElementById(\"root\"))}},[[21,1,2]]]);","extractedComments":[]}