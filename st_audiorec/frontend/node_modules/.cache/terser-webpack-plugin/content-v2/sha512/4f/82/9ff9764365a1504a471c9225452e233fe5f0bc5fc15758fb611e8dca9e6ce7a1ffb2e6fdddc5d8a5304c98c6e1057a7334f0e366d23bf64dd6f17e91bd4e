{"map":{"version":3,"sources":["static/js/main.bcffc81a.chunk.js"],"names":["this","push","21","module","exports","__webpack_require__","29","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","objectSpread2","regenerator","regenerator_default","toConsumableArray","asyncToGenerator","classCallCheck","createClass","inherits","createSuper","dist","StreamlitAudioRecorder_StreamlitAudioRecorder","_StreamlitComponentBa","Object","StreamlitAudioRecorder","_super","props","_this","call","chunks","audioContext","analyser","animationId","canvasRef","drawWaveform","canvas","current","canvasCtx","getContext","bufferLength","frequencyBinCount","dataArray","Uint8Array","draw","requestAnimationFrame","getByteTimeDomainData","fillStyle","fillRect","width","height","lineWidth","strokeStyle","beginPath","sliceWidth","x","i","y","moveTo","lineTo","stroke","startRecording","a","mark","_callee2","stream","source","mediaRecorder","wrap","_context2","prev","next","navigator","mediaDevices","getUserMedia","audio","channelCount","sampleRate","echoCancellation","noiseSuppression","autoGainControl","sent","AudioContext","createMediaStreamSource","createAnalyser","fftSize","connect","MediaRecorder","mimeType","audioBitsPerSecond","ondataavailable","e","data","size","onstop","_callee","blob","reader","_context","Blob","state","type","setState","audioBlob","isRecording","FileReader","onloadend","result","base64Audio","split","arr","atob","map","c","charCodeAt","setComponentValue","fromEntries","entries","readAsDataURL","stop","start","t0","console","error","stopRecording","getTracks","forEach","track","close","resetRecording","cancelAnimationFrame","audioUrl","URL","revokeObjectURL","audioData","render","theme","style","borderStyling","concat","primaryColor","border","outline","createElement","marginBottom","id","onClick","marginRight","padding","cursor","disabled","ref","display","borderRadius","marginTop","controls","src","preload","createRef","key","value","src_StreamlitAudioRecorder","setComponentReady","setFrameHeight","StrictMode","document","getElementById"],"mappings":"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"},"code":"(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{21:function(e,t,a){e.exports=a(29)},29:function(e,t,a){\"use strict\";a.r(t);var n=a(9),r=a.n(n),o=a(19),i=a.n(o),c=a(8),s=a(4),d=a.n(s),l=a(5),u=a(6),m=a(0),p=a(1),h=a(2),R=a(3),g=a(13),f=function(e){Object(h.a)(a,e);var t=Object(R.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).chunks=[],n.audioContext=null,n.analyser=null,n.animationId=null,n.canvasRef=void 0,n.drawWaveform=function(){var e=n.canvasRef.current;if(e&&n.analyser){var t=e.getContext(\"2d\");if(t){var a=n.analyser.frequencyBinCount,r=new Uint8Array(a);!function o(){n.animationId=requestAnimationFrame(o),n.analyser.getByteTimeDomainData(r),t.fillStyle=\"rgb(200, 200, 200)\",t.fillRect(0,0,e.width,e.height),t.lineWidth=2,t.strokeStyle=\"rgb(0, 0, 0)\",t.beginPath();for(var i=1*e.width/a,c=0,s=0;s<a;s++){var d=r[s]/128*e.height/2;0===s?t.moveTo(c,d):t.lineTo(c,d),c+=i}t.lineTo(e.width,e.height/2),t.stroke()}()}}},n.startRecording=Object(u.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:44100,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});case 3:t=e.sent,n.audioContext=new AudioContext,a=n.audioContext.createMediaStreamSource(t),n.analyser=n.audioContext.createAnalyser(),n.analyser.fftSize=2048,a.connect(n.analyser),r=new MediaRecorder(t,{mimeType:\"audio/webm\",audioBitsPerSecond:128e3}),n.chunks=[],r.ondataavailable=function(e){e.data.size>0&&n.chunks.push(e.data)},r.onstop=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Blob(n.state.chunks,{type:\"audio/webm;codecs=opus\"}),n.setState({chunks:[],audioBlob:t,isRecording:!1,mediaRecorder:null}),(a=new FileReader).onloadend=function(){if(a.result){var e=a.result.split(\",\")[1],t=new Uint8Array(atob(e).split(\"\").map((function(e){return e.charCodeAt(0)})));g.a.setComponentValue({arr:Object.fromEntries(Object(l.a)(t.entries()))})}},a.readAsDataURL(t);case 5:case\"end\":return e.stop()}}),e)}))),r.start(100),n.setState({mediaRecorder:r,isRecording:!0}),n.drawWaveform(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(\"Error accessing microphone:\",e.t0);case 21:case\"end\":return e.stop()}}),e,null,[[0,18]])}))),n.stopRecording=function(){n.state.mediaRecorder&&n.state.isRecording&&(n.state.mediaRecorder.stop(),n.state.mediaRecorder.stream.getTracks().forEach((function(e){return e.stop()})),n.audioContext&&n.audioContext.close())},n.resetRecording=function(){n.state.mediaRecorder&&n.state.mediaRecorder.stream.getTracks().forEach((function(e){return e.stop()})),n.audioContext&&n.audioContext.close(),n.animationId&&cancelAnimationFrame(n.animationId),n.state.audioUrl&&URL.revokeObjectURL(n.state.audioUrl),n.chunks=[],n.setState({isRecording:!1,audioBlob:null,audioUrl:null,mediaRecorder:null,audioData:[]}),g.a.setComponentValue(null)},n.render=function(){var e=n.props.theme,t={};if(e){var a=\"1px solid \".concat(n.state.isRecording?e.primaryColor:\"gray\");t.border=a,t.outline=a}return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{style:{marginBottom:\"1rem\"}},r.a.createElement(\"button\",{id:\"record\",onClick:n.state.isRecording?n.stopRecording:n.startRecording,style:Object(c.a)(Object(c.a)({},t),{},{marginRight:\"0.5rem\",padding:\"0.5rem 1rem\",cursor:\"pointer\"})},n.state.isRecording?\"Stop Recording\":\"Start Recording\"),r.a.createElement(\"button\",{id:\"reset\",onClick:n.resetRecording,style:Object(c.a)(Object(c.a)({},t),{},{padding:\"0.5rem 1rem\",cursor:n.state.isRecording?\"not-allowed\":\"pointer\"}),disabled:n.state.isRecording},\"Reset\")),r.a.createElement(\"canvas\",{ref:n.canvasRef,width:\"300\",height:\"100\",style:{display:n.state.isRecording?\"block\":\"none\",border:\"1px solid #ccc\",marginBottom:\"1rem\",borderRadius:\"4px\"}}),n.state.audioUrl&&r.a.createElement(\"div\",{style:{marginTop:\"1rem\"}},r.a.createElement(\"audio\",{id:\"audio\",controls:!0,src:n.state.audioUrl,style:{width:\"100%\",height:\"50px\",borderRadius:\"4px\"},preload:\"metadata\"})))},n.state={isRecording:!1,mediaRecorder:null,audioBlob:null,audioUrl:null,audioData:[]},n.canvasRef=r.a.createRef(),n}return Object(p.a)(a,[{key:\"componentWillUnmount\",value:function(){this.animationId&&cancelAnimationFrame(this.animationId),this.audioContext&&this.audioContext.close(),this.state.audioUrl&&URL.revokeObjectURL(this.state.audioUrl)}}]),a}(g.b),b=Object(g.c)(f);g.a.setComponentReady(),g.a.setFrameHeight(),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById(\"root\"))}},[[21,1,2]]]);","extractedComments":[]}